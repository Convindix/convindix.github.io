Finite indiscernibles and $H_{\varepsilon_0}$

This work is implicit in work of the 70s. From Bovykin's proof of the Kanamori-McAloon theorem.

Let $e$, $r$, $k$ be natural numbers and let $N$ be the least natural number such that for all regressive $f:[N]^{e+1}\to [r]$ there is a min-homogeneous set $H$ of size at least $k$. Let $(\phi_i)_{i\in\mathbb N}$ enumerate formulas with at most $e+1$ free variables by Goedel-code.  Define the coloring $f(a,x_1,\ldots,x_e)$ to be $\left\langle (\phi_i(p,x_1,\ldots,x_e))_{1\leq i\leq e, p < a} \right\rangle$. There is a min-homogeneous set $H$ of size at least $k$. So for any natural numbers $a,x_1,\ldots,x_e,y_1,\ldots,y_e$ from $H$ with $a < x_1 < \ldots < x_e$ and $a < y_1 < \ldots < y_e$, we have that for all $1\leq i\leq e$ and all $p < h_{i_0}$, it holds that $\phi_i(p,x_1,\ldots,x_e)$ iff $\phi_i(p,y_1,\ldots,y_e)$.

This means that $H$ is a set of diagonal indiscernibles for $\mathbb N$ for the first $e$ formulas by Goedel-code.
